<div id="item-{{ item.pk }}"
     data-item-name="{{ item.name }}"
     class="flex items-center px-4 py-3 hover:bg-gray-50 {% if item.is_checked %}bg-gray-50{% endif %}">
    <!-- Checkbox -->
    <form hx-post="{% url 'shopping_check' shopping_list.pk item.pk %}"
          hx-target="#item-{{ item.pk }}"
          hx-swap="outerHTML">
        {% csrf_token %}
        <button type="submit"
                class="flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors
                       {% if item.is_checked %}
                       bg-green-500 border-green-500 text-white
                       {% else %}
                       border-gray-300 hover:border-green-400
                       {% endif %}">
            {% if item.is_checked %}
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
            </svg>
            {% endif %}
        </button>
    </form>

    <!-- Item Details -->
    <div class="ml-3 flex-1 min-w-0">
        <p class="text-sm font-medium {% if item.is_checked %}text-gray-400 line-through{% elif item.is_pantry_item %}text-green-700{% else %}text-gray-900{% endif %}">
            {{ item.name }}
            {% if item.is_pantry_item %}
            <span class="ml-1 text-xs text-green-600">(pantry)</span>
            {% elif item.is_manual %}
            <span class="ml-1 text-xs text-indigo-500">(added)</span>
            {% endif %}
        </p>
        {% if item.quantities %}
        <p class="text-xs {% if item.is_checked %}text-gray-400{% elif item.is_pantry_item %}text-green-600{% else %}text-gray-500{% endif %}">
            {{ item.quantities }}
        </p>
        {% endif %}
    </div>

    <!-- Edit Category Button (only for manual items) -->
    {% if item.is_manual %}
    <button type="button"
            hx-get="{% url 'shopping_edit_category' shopping_list.pk item.pk %}"
            hx-target="#category-modal-container"
            hx-swap="innerHTML"
            class="flex-shrink-0 ml-3 p-1 hover:bg-gray-100 rounded transition-colors"
            title="Change category">
        <svg class="w-5 h-5 text-gray-400 hover:text-gray-600"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
        </svg>
    </button>
    {% endif %}

    <!-- Move Item Button -->
    <button type="button"
            hx-get="{% url 'shopping_item_move' shopping_list.pk item.pk %}"
            hx-target="#move-item-modal-container"
            hx-swap="innerHTML"
            class="flex-shrink-0 ml-3 p-1 hover:bg-gray-100 rounded transition-colors"
            title="Move to another list">
        <svg class="w-5 h-5 text-gray-400 hover:text-gray-600"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
        </svg>
    </button>

    <!-- Star Toggle -->
    <form hx-post="{% url 'shopping_star' shopping_list.pk item.pk %}"
          hx-target="#item-{{ item.pk }}"
          hx-swap="outerHTML">
        {% csrf_token %}
        <button type="submit"
                class="flex-shrink-0 ml-3 p-1 hover:bg-gray-100 rounded transition-colors"
                title="Mark as checked in pantry">
            <svg class="w-5 h-5 {% if item.is_starred %}text-blue-500{% else %}text-gray-300{% endif %} transition-colors"
                 fill="currentColor"
                 viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
        </button>
    </form>
</div>
