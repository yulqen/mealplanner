[program:mealplanner]
; Gunicorn command using uv to run in the project's virtual environment
command=/home/www-data/.local/bin/uv run gunicorn --config /var/www/mealplanner/deploy/gunicorn.conf.py mealplanner.wsgi:application
directory=/var/www/mealplanner
user=www-data
group=www-data

; Environment variables
environment=PATH="/home/www-data/.local/bin:%(ENV_PATH)s"

; Auto-start and restart settings
autostart=true
autorestart=true
startsecs=10
startretries=3

; Stop settings
stopwaitsecs=30
stopsignal=TERM

; Logging
stdout_logfile=/var/log/mealplanner/supervisor-stdout.log
stderr_logfile=/var/log/mealplanner/supervisor-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
stdout_logfile_backups=3
stderr_logfile_backups=3

; Process count (just 1, gunicorn handles workers)
numprocs=1
